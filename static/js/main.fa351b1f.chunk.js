(this["webpackJsonpsd-0x-project-trybewallet"]=this["webpackJsonpsd-0x-project-trybewallet"]||[]).push([[0],{33:function(e,t,n){e.exports=n(45)},38:function(e,t,n){},45:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(19),c=n.n(l),i=n(22),o=(n(38),n(11)),u=n(3),s=n(15),d=n(9),m=n(10),p=n(7),h=n(13),b=n(12),E=n(18),f=n.n(E),v=n(24),O=function(){return fetch("https://economia.awesomeapi.com.br/json/all").then((function(e){return e.json()}))},j=function(e){return{type:"EXPENSES",payload:e}},y=function(e){Object(h.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).state={buttonDisabled:!0,email:"",password:""},a.handleChange=a.handleChange.bind(Object(p.a)(a)),a.checkButton=a.checkButton.bind(Object(p.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(p.a)(a)),a}return Object(m.a)(n,[{key:"componentDidUpdate",value:function(){this.checkButton()}},{key:"checkButton",value:function(){var e=this.state,t=e.email,n=e.password,a=e.buttonDisabled;(t.endsWith(".com")||t.endsWith(".br"))&&n.length>=6&&a&&this.setState({buttonDisabled:!1})}},{key:"handleChange",value:function(e){var t,n=e.target,a=n.name,r=n.value;this.setState((t={},Object(s.a)(t,a,r),Object(s.a)(t,"buttonDisabled",!0),t))}},{key:"handleSubmit",value:function(e){e.preventDefault();var t=this.props,n=t.history;(0,t.setUser)(this.state.email),n.push("/carteira")}},{key:"render",value:function(){var e=this.state.buttonDisabled;return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("input",{"data-testid":"email-input",type:"email",name:"email",onChange:this.handleChange,placeholder:"email"}),r.a.createElement("input",{"data-testid":"password-input",type:"password",name:"password",onChange:this.handleChange,placeholder:"senha"})),r.a.createElement("button",{type:"button",disabled:e,onClick:this.handleSubmit},"Entrar"))}}]),n}(r.a.Component),g=Object(o.b)(null,(function(e){return{setUser:function(t){return e({type:"USER_INFO",payload:t})}}}))(y),k=n(2),x=function(e){Object(h.a)(n,e);var t=Object(b.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(m.a)(n,[{key:"render",value:function(){var e=this.props,t=e.user.email,n=e.total,a=e.moeda;return r.a.createElement("div",null,r.a.createElement("span",{"data-testid":"email-field"},"Email:"," ",t)," ","|"," ",r.a.createElement("span",{"data-testid":"total-field"},"Despesa Total: R$",n)," ",r.a.createElement("span",{"data-testid":"header-currency-field"},a))}}]),n}(r.a.Component),C=Object(o.b)((function(e){return{user:e.user,total:e.wallet.expenses.reduce((function(e,t){var n=t.value,a=t.currency,r=t.exchangeRates;return e+parseFloat(n*r[a].ask)}),0).toFixed(2)}}))(x);x.defaultProps={total:0};var w=function(e){Object(h.a)(n,e);var t=Object(b.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(m.a)(n,[{key:"makeButton",value:function(e){var t=this.props,n=t.editClick,a=t.onClick;return e?r.a.createElement("button",{type:"button",onClick:n}," Editar despesa "):r.a.createElement("button",{type:"button",onClick:a}," Adicionar Despesa ")}},{key:"makeDescription",value:function(e){return r.a.createElement("label",{htmlFor:"desc"},"Descri\xe7\xe3o:",r.a.createElement("textarea",{name:"description",id:"desc",style:{verticalAlign:"top"},onChange:e}))}},{key:"render",value:function(){var e=this.props,t=e.expense.value,n=e.wallet.currencies,a=e.onChange,l=e.editItem;return r.a.createElement("form",null,r.a.createElement("label",{htmlFor:"valor"},"Valor:",r.a.createElement("input",{value:t,onChange:a,name:"value",type:"number",id:"valor"}))," ",r.a.createElement("label",{htmlFor:"moeda"},"Moeda:",r.a.createElement("select",{name:"currency",id:"moeda",onChange:a},n&&n.map((function(e,t){return r.a.createElement("option",{key:t},e)}))))," ",r.a.createElement("label",{htmlFor:"pagamento"},"M\xe9todo de pagamento:",r.a.createElement("select",{name:"method",id:"pagamento",onChange:a},r.a.createElement("option",null," Dinheiro "),r.a.createElement("option",null," Cart\xe3o de cr\xe9dito "),r.a.createElement("option",null," Cart\xe3o de d\xe9bito ")))," ",r.a.createElement("label",{htmlFor:"tag"},"Tag:",r.a.createElement("select",{name:"tag",id:"tag",onChange:a},r.a.createElement("option",{value:"Alimenta\xe7\xe3o"}," Alimenta\xe7\xe3o "),r.a.createElement("option",{value:"Lazer"}," Lazer "),r.a.createElement("option",{value:"Trabalho"}," Trabalho "),r.a.createElement("option",{value:"Transporte"}," Transporte "),r.a.createElement("option",{value:"Sa\xfade"}," Sa\xfade ")))," ",this.makeDescription(a),this.makeButton(l))}}]),n}(r.a.Component),I=function(e){Object(h.a)(n,e);var t=Object(b.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(m.a)(n,[{key:"makeButton",value:function(e){var t=this.props,n=t.deleteItem,a=t.editItem;return r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{type:"button","data-testid":"delete-btn",onClick:function(){return n(e)}},"Deletar"),r.a.createElement("button",{type:"button","data-testid":"edit-btn",onClick:function(){return a(e)}},"Editar"))}},{key:"makeTable",value:function(e){var t=this;if(e.length)return e.map((function(e){return r.a.createElement("tr",{key:e.id},r.a.createElement("td",null,e.description),r.a.createElement("td",null,e.tag),r.a.createElement("td",null,e.method),r.a.createElement("td",null,e.value),r.a.createElement("td",null,e.exchangeRates[e.currency].name),r.a.createElement("td",null,parseFloat(e.exchangeRates[e.currency].ask).toFixed(2)),r.a.createElement("td",null,parseFloat(e.exchangeRates[e.currency].ask*e.value).toFixed(2)),r.a.createElement("td",null,"Real"),r.a.createElement("td",null,t.makeButton(e)))}))}},{key:"render",value:function(){var e=this.props.wallet.expenses;return r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null," Descri\xe7\xe3o "),r.a.createElement("th",null," Tag "),r.a.createElement("th",null," M\xe9todo de pagamento "),r.a.createElement("th",null," Valor "),r.a.createElement("th",null," Moeda "),r.a.createElement("th",null," C\xe2mbio utilizado "),r.a.createElement("th",null," Valor convertido "),r.a.createElement("th",null," Moeda de convers\xe3o "),r.a.createElement("th",null," Editar/Excluir "))),r.a.createElement("tbody",null,this.makeTable(e)))}}]),n}(r.a.Component),D=Object(o.b)((function(e){return{wallet:e.wallet}}))(I),S=function(e){Object(h.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).state={expense:{id:0,value:0,currency:"USD",method:"Dinheiro",tag:"Alimenta\xe7\xe3o"},moeda:"BRL",isEditing:!1},a.handleChange=a.handleChange.bind(Object(p.a)(a)),a.handleButton=a.handleButton.bind(Object(p.a)(a)),a.deleteItem=a.deleteItem.bind(Object(p.a)(a)),a.editItem=a.editItem.bind(Object(p.a)(a)),a.editClick=a.editClick.bind(Object(p.a)(a)),a}return Object(m.a)(n,[{key:"componentDidMount",value:function(){(0,this.props.sendCoin)()}},{key:"handleChange",value:function(e){var t=e.target,n=t.name,a=t.value;this.setState((function(e){return{expense:Object(k.a)(Object(k.a)({},e.expense),{},Object(s.a)({},n,a))}}))}},{key:"handleButton",value:function(){var e=this.props,t=e.sendExpenses,n=e.wallet;t(this.state.expense),this.setState((function(e){return{expense:Object(k.a)(Object(k.a)({},e.expense),{},{id:n.expenses.length+1})}}),(function(){}))}},{key:"deleteItem",value:function(e){var t=this.props,n=t.deleteExpense,a=t.wallet;this.setState((function(e){return{expense:Object(k.a)(Object(k.a)({},e.expense),{},{id:a.expenses.length-1})}}),(function(){n(e)}))}},{key:"editItem",value:function(e){this.setState({expense:e,isEditing:!0})}},{key:"editClick",value:function(){var e=this.state.expense,t=this.props,n=t.setEditedItem,a=t.wallet;n(e),this.setState((function(e){return Object(k.a)(Object(k.a)({},e),{},{isEditing:!1,expense:Object(k.a)(Object(k.a)({},e.expense),{},{id:a.expenses.length})})}))}},{key:"render",value:function(){var e=this.props.wallet,t=this.state,n=t.moeda,a=t.isEditing,l=t.expense;return r.a.createElement("div",null,r.a.createElement("header",null,r.a.createElement(C,{moeda:n}),r.a.createElement("br",null)),r.a.createElement(w,{wallet:e,onChange:this.handleChange,onClick:this.handleButton,editItem:a,expense:l,editClick:this.editClick}),r.a.createElement(D,{deleteItem:this.deleteItem,editItem:this.editItem}))}}]),n}(r.a.Component),T=Object(o.b)((function(e){return{user:e.user,wallet:e.wallet}}),(function(e){return{sendCoin:function(){return e(function(){var e=Object(v.a)(f.a.mark((function e(t){var n,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O();case 2:n=e.sent,a=Object.keys(n).filter((function(e){return"USDT"!==e})),t({type:"COIN_INFO",payload:a});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},sendExpenses:function(t){return e((n=t,function(){var e=Object(v.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O();case 2:n.exchangeRates=e.sent,t(j(n));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));var n},deleteExpense:function(t){return e({type:"DELETE_ITEM",payload:t})},setEditedItem:function(t){return e({type:"EDIT_ITEM",payload:t})}}}))(S);S.defaultProps={wallet:{total:0}};var F=function(){return r.a.createElement(u.c,null,r.a.createElement(u.a,{exact:!0,path:"/",component:g}),r.a.createElement(u.a,{exact:!0,path:"/carteira",component:T}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var B=n(14),M=n(30),R=n(31),N={email:""},_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_INFO":return Object(k.a)(Object(k.a)({},e),{},{email:t.payload});default:return e}},U=n(32),A={currencies:[],expenses:[]},L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case"COIN_INFO":return Object(k.a)(Object(k.a)({},e),{},{currencies:a});case"EXPENSES":return Object(k.a)(Object(k.a)({},e),{},{expenses:[].concat(Object(U.a)(e.expenses),[a])});case"EDIT_ITEM":return Object(k.a)(Object(k.a)({},e),{},{expenses:e.expenses.map((function(e){return e.id===a.id?a:e}))});case"DELETE_ITEM":return Object(k.a)(Object(k.a)({},e),{},{expenses:e.expenses.filter((function(e){return e.id!==a.id}))});default:return e}},W=Object(B.combineReducers)({user:_,wallet:L}),P=Object(B.createStore)(W,Object(M.composeWithDevTools)(Object(B.applyMiddleware)(R.a)));c.a.render(r.a.createElement(i.a,null,r.a.createElement(o.a,{store:P},r.a.createElement(F,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[33,1,2]]]);
//# sourceMappingURL=main.fa351b1f.chunk.js.map